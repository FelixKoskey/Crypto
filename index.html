<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CryptoPro - Professional Trading Platform</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #0a1628 0%, #1e3a5f 100%);
            color: #ffffff;
            min-height: 100vh;
            overflow-x: hidden;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        @keyframes slideLeft {
            0% { transform: translateX(0); }
            100% { transform: translateX(-100%); }
        }

        @keyframes glow {
            0%, 100% { box-shadow: 0 0 20px rgba(0, 255, 136, 0.3); }
            50% { box-shadow: 0 0 40px rgba(0, 255, 136, 0.6); }
        }

        @keyframes slideInUp {
            from { transform: translateY(100px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .layer { display: none; min-height: 100vh; animation: fadeIn 0.5s ease-out; }
        .layer.active { display: block; }

        .navbar {
            background: rgba(20, 35, 60, 0.95);
            backdrop-filter: blur(10px);
            padding: 16px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 1000;
            border-bottom: 1px solid rgba(0, 217, 255, 0.2);
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 24px;
            font-weight: 700;
            color: #00d9ff;
            cursor: pointer;
        }

        .nav-links { display: flex; gap: 20px; align-items: center; }

        .nav-btn {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 14px;
        }

        .btn-login {
            background: transparent;
            color: #00d9ff;
            border: 2px solid #00d9ff;
        }

        .btn-signup {
            background: linear-gradient(135deg, #00d9ff, #0099cc);
            color: #fff;
            border: none;
        }

        .btn-signup:hover, .btn-login:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(0, 217, 255, 0.4);
        }

        .container {
            max-width: 1200px;
            margin: 30px auto;
            padding: 0 20px;
        }

        .bonus-banner {
            background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%);
            padding: 20px;
            text-align: center;
            margin-bottom: 20px;
            border-radius: 16px;
            animation: glow 2s infinite;
        }

        .bonus-amount {
            font-size: 48px;
            font-weight: 900;
            color: #000;
            margin: 12px 0;
        }

        .winners-ticker {
            background: rgba(20, 35, 60, 0.9);
            padding: 16px 0;
            margin-bottom: 24px;
            overflow: hidden;
            border-radius: 12px;
            border: 2px solid rgba(0, 255, 136, 0.3);
        }

        .ticker-content {
            display: flex;
            animation: slideLeft 180s linear infinite;
            white-space: nowrap;
        }

        .winner-item {
            display: inline-flex;
            align-items: center;
            gap: 12px;
            padding: 8px 24px;
            background: rgba(0, 255, 136, 0.1);
            border-radius: 20px;
            margin-right: 16px;
            border: 1px solid rgba(0, 255, 136, 0.2);
        }

        .hero {
            text-align: center;
            padding: 60px 20px 40px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 24px;
            margin-bottom: 30px;
        }

        .hero h1 {
            font-size: 42px;
            margin-bottom: 16px;
            background: linear-gradient(135deg, #00d9ff, #a855f7);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .stats-grid {
            display: flex;
            justify-content: space-around;
            background: rgba(0, 217, 255, 0.1);
            border-radius: 16px;
            padding: 16px;
            margin-bottom: 24px;
            flex-wrap: wrap;
        }

        .stat { text-align: center; margin: 8px; }
        .stat-value {
            font-size: 24px;
            font-weight: 700;
            color: #00d9ff;
        }

        .card {
            background: rgba(20, 35, 60, 0.9);
            border-radius: 24px;
            padding: 30px;
            margin-bottom: 24px;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.4);
        }

        .auth-container {
            max-width: 480px;
            margin: 80px auto;
            padding: 40px;
            background: rgba(20, 35, 60, 0.95);
            border-radius: 24px;
        }

        .form-group { margin-bottom: 20px; }
        .form-group input, .form-group select, .form-group textarea {
            width: 100%;
            padding: 14px 16px;
            border: 2px solid rgba(0, 217, 255, 0.3);
            border-radius: 12px;
            background: rgba(10, 25, 45, 0.6);
            color: #fff;
            font-size: 16px;
        }

        .btn-submit {
            width: 100%;
            padding: 16px;
            border: none;
            border-radius: 12px;
            background: linear-gradient(135deg, #00d9ff, #0099cc);
            color: #fff;
            font-size: 18px;
            font-weight: 700;
            cursor: pointer;
        }

        .btn-submit:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .payment-methods {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            margin: 20px 0;
        }

        .payment-method-card {
            background: rgba(10, 25, 45, 0.6);
            border: 2px solid rgba(0, 217, 255, 0.2);
            border-radius: 12px;
            padding: 16px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
        }

        .payment-method-card:hover {
            border-color: #00d9ff;
        }

        .payment-method-card.selected {
            border-color: #00ff88;
            background: rgba(0, 255, 136, 0.1);
        }

        .payment-details-layer {
            display: none;
            margin-top: 20px;
            padding: 20px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 12px;
        }

        .payment-details-layer.active {
            display: block;
            animation: fadeIn 0.3s ease-out;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 2000;
            align-items: center;
            justify-content: center;
            padding: 20px;
            overflow-y: auto;
        }

        .modal.active { display: flex; }

        .modal-content {
            background: linear-gradient(135deg, #1a1f3a 0%, #0a0e27 100%);
            border-radius: 24px;
            padding: 32px;
            max-width: 600px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
        }

        @media (max-width: 768px) {
            .hero h1 { font-size: 28px; }
            .payment-methods { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>

<div id="welcomeLayer" class="layer active">
    <nav class="navbar">
        <div class="logo" onclick="showLayer('welcomeLayer')">
            <span style="font-size: 28px;">üíé</span>
            <span>CryptoPro</span>
        </div>
        <div class="nav-links">
            <button class="nav-btn btn-login" onclick="showLayer('loginLayer')">Login</button>
            <button class="nav-btn btn-signup" onclick="showLayer('signupLayer')">Sign Up</button>
        </div>
    </nav>
    
    <div class="container">
        <div class="bonus-banner">
            <h2 style="font-size: 28px; color: #000; margin-bottom: 8px; font-weight: 900;">üéâ WELCOME BONUS üéâ</h2>
            <div class="bonus-amount">100% MATCH</div>
            <p style="font-size: 16px; color: rgba(0, 0, 0, 0.8);"><strong>Get 100% bonus on your first deposit!</strong><br>Deposit $100, Get $200 to trade!</p>
        </div>
        
        <div class="winners-ticker">
            <div style="text-align: center; color: #00ff88; font-size: 14px; font-weight: 700; margin-bottom: 12px;">üèÜ LIVE WINNERS - REAL-TIME PROFITS üèÜ</div>
            <div class="ticker-content" id="winnersTicker"></div>
        </div>
        
        <div class="hero">
            <h1>Professional Crypto Trading Platform</h1>
            <p>Join <span id="heroActiveUsers">50,000+</span> investors earning daily profits! Over $125M in profits paid!</p>
        </div>
        
        <div class="stats-grid">
            <div class="stat">
                <div class="stat-value" id="statsUsers">50,123</div>
                <div style="font-size: 12px; color: rgba(255, 255, 255, 0.7);">Active Traders</div>
            </div>
            <div class="stat">
                <div class="stat-value">$125.7M</div>
                <div style="font-size: 12px; color: rgba(255, 255, 255, 0.7);">Total Profits</div>
            </div>
        </div>
        
        <div class="card">
            <h2 style="color: #00d9ff; margin-bottom: 16px;">üìä Live Crypto Markets</h2>
            <div id="marketsContainer">
                <p style="text-align: center; padding: 40px; opacity: 0.7;">Markets loading...</p>
            </div>
        </div>
    </div>
</div>

<div id="signupLayer" class="layer">
    <div class="auth-container">
        <div style="text-align: center; margin-bottom: 32px;">
            <div style="font-size: 60px; margin-bottom: 12px; animation: pulse 2s infinite;">üíé</div>
            <div style="font-size: 32px; font-weight: 900; background: linear-gradient(135deg, #00d9ff, #a855f7); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">CryptoPro</div>
        </div>
        
        <h2 style="text-align: center; margin-bottom: 24px; font-size: 24px; color: #00d9ff;">Create Your Account</h2>
        
        <div id="signupAlert" style="display: none; padding: 12px; border-radius: 8px; margin-bottom: 20px;"></div>
        
        <form id="signupForm" onsubmit="handleSignup(event)">
            <div class="form-group">
                <label>Full Name</label>
                <input type="text" id="signupName" placeholder="Enter your full name" required>
            </div>
            <div class="form-group">
                <label>Email Address</label>
                <input type="email" id="signupEmail" placeholder="your@email.com" required>
            </div>
            <div class="form-group">
                <label>Phone Number</label>
                <input type="tel" id="signupPhone" placeholder="+1 234 567 8900" required>
            </div>
            <div class="form-group">
                <label>Password</label>
                <input type="password" id="signupPassword" placeholder="Create strong password" required minlength="6">
            </div>
            <div class="form-group">
                <label>Confirm Password</label>
                <input type="password" id="signupConfirm" placeholder="Re-enter password" required>
            </div>
            <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 20px;">
                <input type="checkbox" id="signupTerms" required style="width: 18px; height: 18px;">
                <label for="signupTerms" style="font-size: 13px;">I agree to Terms & Conditions</label>
            </div>
            <button type="submit" class="btn-submit" id="signupBtn">üöÄ Create Account</button>
        </form>
        
        <div style="text-align: center; margin-top: 24px;">
            <span style="font-size: 14px; color: rgba(255, 255, 255, 0.8);">Already have an account? </span>
            <a onclick="showLayer('loginLayer')" style="color: #00d9ff; cursor: pointer; font-weight: 600;">Login Here</a>
        </div>
    </div>
</div>

<div id="loginLayer" class="layer">
    <div class="auth-container">
        <div style="text-align: center; margin-bottom: 32px;">
            <div style="font-size: 60px; margin-bottom: 12px;">üíé</div>
            <div style="font-size: 32px; font-weight: 900; background: linear-gradient(135deg, #00d9ff, #a855f7); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">CryptoPro</div>
        </div>
        
        <h2 style="text-align: center; margin-bottom: 24px; font-size: 24px; color: #00d9ff;">Welcome Back</h2>
        
        <div id="loginAlert" style="display: none; padding: 12px; border-radius: 8px; margin-bottom: 20px;"></div>
        
        <form id="loginForm" onsubmit="handleLogin(event)">
            <div class="form-group">
                <label>Email Address</label>
                <input type="email" id="loginEmail" placeholder="your@email.com" required>
            </div>
            <div class="form-group">
                <label>Password</label>
                <input type="password" id="loginPassword" placeholder="Enter your password" required>
            </div>
            <button type="submit" class="btn-submit">üîê Login</button>
        </form>
        
        <div style="text-align: center; margin-top: 24px;">
            <span style="font-size: 14px; color: rgba(255, 255, 255, 0.8);">Don't have an account? </span>
            <a onclick="showLayer('signupLayer')" style="color: #00d9ff; cursor: pointer; font-weight: 600;">Create Account</a>
        </div>
        <div style="text-align: center; margin-top: 20px;">
            <a onclick="showLayer('welcomeLayer')" style="color: rgba(255,255,255,0.6); cursor: pointer;">‚Üê Back to Home</a>
        </div>
    </div>
</div>

<div id="dashboardLayer" class="layer">
    <nav class="navbar">
        <div class="logo">
            <span style="font-size: 28px;">üíé</span>
            <span>CryptoPro</span>
        </div>
        <button style="background: rgba(255, 255, 255, 0.1); color: #fff; padding: 10px 20px; border: 1px solid rgba(255, 255, 255, 0.2); border-radius: 8px; cursor: pointer;" onclick="handleLogout()">Logout</button>
    </nav>
    
    <div class="container">
        <div style="background: rgba(20, 35, 60, 0.95); padding: 20px; border-radius: 16px; margin-bottom: 24px; display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 16px;">
            <div style="display: flex; align-items: center; gap: 12px;">
                <div style="width: 48px; height: 48px; border-radius: 50%; background: linear-gradient(135deg, #00d9ff, #a855f7); display: flex; align-items: center; justify-content: center; font-size: 24px;">üë§</div>
                <div>
                    <div style="font-size: 16px; font-weight: 600;" id="userName">User</div>
                    <div style="font-size: 12px; opacity: 0.7;" id="userEmail">email@example.com</div>
                </div>
            </div>
            <div style="display: flex; gap: 12px;">
                <button class="toggle-btn" id="demoBtn" onclick="switchAccount('demo')" style="padding: 10px 20px; border: 2px solid rgba(0, 217, 255, 0.3); border-radius: 8px; background: transparent; color: rgba(255, 255, 255, 0.7); cursor: pointer; font-weight: 600;">üéÆ DEMO</button>
                <button class="toggle-btn active" id="realBtn" onclick="switchAccount('real')" style="padding: 10px 20px; border: 2px solid transparent; border-radius: 8px; background: linear-gradient(135deg, #00d9ff, #0099cc); color: #fff; cursor: pointer; font-weight: 600;">üí∞ REAL</button>
            </div>
        </div>
        
        <div style="background: linear-gradient(135deg, #00ff88, #00d9ff); padding: 32px; border-radius: 20px; margin-bottom: 24px; text-align: center;">
            <div style="color: rgba(10, 22, 40, 0.8); font-size: 14px; font-weight: 600; margin-bottom: 8px;">TOTAL PORTFOLIO VALUE</div>
            <div style="font-size: 48px; font-weight: 900; color: #0a1628;" id="dashBalance">$0.00</div>
        </div>
        
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 16px; margin-bottom: 24px;">
            <button onclick="alert('Trade feature - Coming soon!')" style="padding: 20px; border: none; border-radius: 16px; background: linear-gradient(135deg, #fbbf24, #f59e0b); color: #000; font-size: 16px; font-weight: 600; cursor: pointer;">‚ö° TRADE NOW</button>
            <button onclick="alert('Bot feature - Coming soon!')" style="padding: 20px; border: none; border-radius: 16px; background: linear-gradient(135deg, #a855f7, #7c3aed); color: #fff; font-size: 16px; font-weight: 600; cursor: pointer;">ü§ñ TRADING BOT</button>
            <button onclick="showModal('depositModal')" style="padding: 20px; border: none; border-radius: 16px; background: linear-gradient(135deg, #00d9ff, #0099cc); color: #fff; font-size: 16px; font-weight: 600; cursor: pointer;">üí∞ DEPOSIT</button>
            <button onclick="alert('Withdraw feature - Coming soon!')" style="padding: 20px; border: none; border-radius: 16px; background: linear-gradient(135deg, #ff006e, #cc0055); color: #fff; font-size: 16px; font-weight: 600; cursor: pointer;">üí∏ WITHDRAW</button>
        </div>
    </div>
</div>

<div id="depositModal" class="modal">
    <div class="modal-content">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px;">
            <h2 style="font-size: 24px; color: #00ff88;">üí∞ Deposit Funds</h2>
            <button onclick="closeModal('depositModal')" style="background: rgba(255, 255, 255, 0.1); border: none; color: white; font-size: 24px; width: 40px; height: 40px; border-radius: 50%; cursor: pointer;">√ó</button>
        </div>
        
        <div style="background: rgba(251, 191, 36, 0.1); border: 2px solid rgba(251, 191, 36, 0.3); border-radius: 12px; padding: 16px; margin-bottom: 20px; text-align: center;">
            <div style="font-size: 24px; font-weight: 900; color: #fbbf24; margin-bottom: 8px;">üéâ 100% WELCOME BONUS!</div>
            <div style="font-size: 14px;">First deposit gets 100% match! Deposit $100, get $200!</div>
        </div>
        
        <div class="form-group">
            <label>Amount (USD)</label>
            <input type="number" id="depositAmount" min="10" placeholder="Minimum $10" required>
        </div>
        
        <div class="form-group">
            <label>Select Payment Method</label>
            <div class="payment-methods" id="paymentMethods">
                <div class="payment-method-card" onclick="selectPaymentMethod('crypto')">
                    <div style="font-size: 36px; margin-bottom: 8px;">ü™ô</div>
                    <div style="font-weight: 600; font-size: 14px;">Cryptocurrency</div>
                </div>
                <div class="payment-method-card" onclick="selectPaymentMethod('mpesa')">
                    <div style="font-size: 36px; margin-bottom: 8px;">üì±</div>
                    <div style="font-weight: 600; font-size: 14px;">M-Pesa</div>
                </div>
                <div class="payment-method-card" onclick="selectPaymentMethod('card')">
                    <div style="font-size: 36px; margin-bottom: 8px;">üí≥</div>
                    <div style="font-weight: 600; font-size: 14px;">Card</div>
                </div>
                <div class="payment-method-card" onclick="selectPaymentMethod('bank')">
                    <div style="font-size: 36px; margin-bottom: 8px;">üè¶</div>
                    <div style="font-weight: 600; font-size: 14px;">Bank Transfer</div>
                </div>
            </div>
        </div>
        
        <div class="payment-details-layer" id="paymentDetailsLayer">
            <div style="background: rgba(0, 255, 136, 0.1); border: 2px solid rgba(0, 255, 136, 0.3); border-radius: 12px; padding: 16px; margin: 16px 0; text-align: center;">
                <div style="font-size: 12px; margin-bottom: 8px; opacity: 0.7;">Send Payment To:</div>
                <div style="font-size: 18px; font-weight: 700; color: #00ff88; word-break: break-all;" id="paymentAddressText">Select a payment method</div>
                <div style="font-size: 12px; margin-top: 8px; opacity: 0.7;" id="paymentID">Payment ID: CPT-XXXXX</div>
            </div>
            
            <div style="background: rgba(255, 0, 110, 0.1); border: 2px solid rgba(255, 0, 110, 0.3); border-radius: 12px; padding: 16px; margin: 16px 0;">
                <strong style="color: #ff006e; display: block; margin-bottom: 8px;">‚ö†Ô∏è IMPORTANT INSTRUCTIONS:</strong>
                <div style="font-size: 13px; line-height: 1.6;">
                    ‚Ä¢ Complete payment using details above<br>
                    ‚Ä¢ Funds auto-appear within 1-5 minutes<br>
                    ‚Ä¢ If not credited after 5 min, upload proof<br>
                    ‚Ä¢ Save your transaction reference
                </div>
            </div>
            
            <div class="form-group">
                <label>Transaction Reference (Required)</label>
                <input type="text" id="depositRef" placeholder="Enter your transaction ID/hash" required>
            </div>
            
            <div class="form-group">
                <label>Payment Proof (Optional - if not auto-credited after 5 min)</label>
                <textarea id="depositProof" rows="3" placeholder="Paste screenshot link or transaction details..."></textarea>
            </div>
            
            <button class="btn-submit" onclick="processDeposit()">‚ö° CONFIRM DEPOSIT</button>
            
            <div style="text-align: center; margin-top: 16px; font-size: 12px; opacity: 0.7;">
                Funds will be auto-credited within 1-5 minutes after payment verification
            </div>
        </div>
    </div>
</div>

<script>
// Configuration
const CONFIG = {
    MIN_DEPOSIT: 10,
    ACTIVE_USERS_MIN: 1000,
    ACTIVE_USERS_MAX: 50000,
    ACTIVE_USERS_UPDATE_INTERVAL: 60000,
    WELCOME_BONUS: 1.0,
    PAYMENT_VERIFICATION_TIME: 60000
};

const PAYMENT_METHODS = {
    crypto: { name: 'Cryptocurrency', address: 'bc1qxy2kgdygjrsqtzq2n0yrf2493p83kkfjhx0wlh' },
    mpesa: { name: 'M-Pesa', address: 'PayBill: 123456 | Account: CryptoPro' },
    card: { name: 'Card Payment', address: 'CryptoProTrading.com/pay' },
    bank: { name: 'Bank Transfer', address: 'CryptoPro Trading Ltd. | ACC: 1234567890' }
};

// State
let currentUser = null;
let currentUserEmail = '';
let activeAccount = 'real';
let selectedPaymentMethod = null;
let activeUsers = 50123;

const winnerNames = [
    'James M.', 'Sarah K.', 'Michael R.', 'Emily T.', 'David L.', 'Jessica P.',
    'Robert H.', 'Amanda W.', 'Christopher B.', 'Jennifer S.', 'Daniel C.', 'Ashley D.',
    'Matthew F.', 'Lisa G.', 'Andrew N.', 'Michelle V.', 'Joshua X.', 'Elizabeth Y.',
    'Kevin Z.', 'Patricia Q.', 'Brian J.', 'Linda U.', 'Steven I.', 'Barbara O.'
];

// Active users counter
function updateActiveUsers() {
    const variation = Math.floor(Math.random() * 1000) - 500;
    activeUsers = Math.max(CONFIG.ACTIVE_USERS_MIN, Math.min(CONFIG.ACTIVE_USERS_MAX, activeUsers + variation));
    const formatted = activeUsers.toLocaleString();
    
    const statsEl = document.getElementById('statsUsers');
    const heroEl = document.getElementById('heroActiveUsers');
    if (statsEl) statsEl.textContent = formatted;
    if (heroEl) heroEl.textContent = formatted + '+';
}

// Generate winners ticker - FIXED VERSION
function generateWinnersTicker() {
    const ticker = document.getElementById('winnersTicker');
    if (!ticker) {
        console.log('Ticker element not found');
        return;
    }
    
    let html = '';
    for (let i = 0; i < 100; i++) {
        const name = winnerNames[Math.floor(Math.random() * winnerNames.length)];
        const amount = (Math.random() * 500 + 50).toFixed(2);
        
        html += '<div class="winner-item">';
        html += '<span style="font-size: 20px;">üéâ</span>';
        html += '<span style="font-weight: 600; color: #fff;">' + name + '</span>';
        html += '<span>won</span>';
        html += '<span style="color: #00ff88; font-weight: 700;">+$' + amount + '</span>';
        html += '</div>';
    }
    
    // Duplicate for seamless loop
    ticker.innerHTML = html + html;
    console.log('‚úÖ Winners ticker generated with ' + (html.length / 100) + ' items');
}

// Layer management
function showLayer(layerId) {
    document.querySelectorAll('.layer').forEach(layer => layer.classList.remove('active'));
    document.getElementById(layerId).classList.add('active');
    if (layerId === 'dashboardLayer') updateDashboard();
}

// Handle signup
function handleSignup(event) {
    event.preventDefault();
    
    const submitBtn = document.getElementById('signupBtn');
    submitBtn.disabled = true;
    submitBtn.textContent = 'Creating Account...';
    
    const name = document.getElementById('signupName').value.trim();
    const email = document.getElementById('signupEmail').value.trim().toLowerCase();
    const phone = document.getElementById('signupPhone').value.trim();
    const password = document.getElementById('signupPassword').value;
    const confirm = document.getElementById('signupConfirm').value;
    
    if (password !== confirm) {
        showAlert('signupAlert', 'Passwords do not match', 'error');
        submitBtn.disabled = false;
        submitBtn.textContent = 'üöÄ Create Account';
        return;
    }
    
    const users = JSON.parse(localStorage.getItem('cryptoProUsers') || '{}');
    
    if (users[email]) {
        showAlert('signupAlert', 'Email already registered. Please login.', 'error');
        submitBtn.disabled = false;
        submitBtn.textContent = 'üöÄ Create Account';
        return;
    }
    
    users[email] = {
        name: name, email: email, phone: phone, password: password,
        demoBalance: 10000,
        realBalance: 0,
        displayBalance: 0,
        totalDeposited: 0,
        receivedWelcomeBonus: false,
        pendingDeposits: [],
        createdAt: new Date().toISOString()
    };
    
    localStorage.setItem('cryptoProUsers', JSON.stringify(users));
    showAlert('signupAlert', '‚úÖ Account created! Redirecting...', 'success');
    
    setTimeout(function() {
        document.getElementById('signupForm').reset();
        submitBtn.disabled = false;
        submitBtn.textContent = 'üöÄ Create Account';
        showLayer('loginLayer');
    }, 2000);
}

// Handle login
function handleLogin(event) {
    event.preventDefault();
    
    const email = document.getElementById('loginEmail').value.trim().toLowerCase();
    const password = document.getElementById('loginPassword').value;
    const users = JSON.parse(localStorage.getItem('cryptoProUsers') || '{}');
    
    if (!users[email]) {
        showAlert('loginAlert', 'Account not found. Please sign up.', 'error');
        return;
    }
    
    if (users[email].password !== password) {
        showAlert('loginAlert', 'Incorrect password', 'error');
        return;
    }
    
    currentUser = users[email];
    currentUserEmail = email;
    sessionStorage.setItem('loggedIn', 'true');
    sessionStorage.setItem('currentEmail', email);
    
    showAlert('loginAlert', '‚úÖ Login successful!', 'success');
    setTimeout(function() {
        document.getElementById('loginForm').reset();
        showLayer('dashboardLayer');
    }, 1500);
}

// Handle logout
function handleLogout() {
    if (confirm('Logout?')) {
        sessionStorage.clear();
        currentUser = null;
        currentUserEmail = '';
        showLayer('welcomeLayer');
    }
}

// Update dashboard
function updateDashboard() {
    if (!currentUser) return;
    document.getElementById('userName').textContent = currentUser.name;
    document.getElementById('userEmail').textContent = currentUser.email;
    const balance = activeAccount === 'demo' ? currentUser.demoBalance : currentUser.displayBalance;
    document.getElementById('dashBalance').textContent = '$' + balance.toFixed(2);
}

// Switch account
function switchAccount(type) {
    activeAccount = type;
    document.getElementById('demoBtn').classList.toggle('active', type === 'demo');
    document.getElementById('realBtn').classList.toggle('active', type === 'real');
    
    // Update button styles
    if (type === 'demo') {
        document.getElementById('demoBtn').style.background = 'linear-gradient(135deg, #00d9ff, #0099cc)';
        document.getElementById('demoBtn').style.color = '#fff';
        document.getElementById('demoBtn').style.borderColor = 'transparent';
        document.getElementById('realBtn').style.background = 'transparent';
        document.getElementById('realBtn').style.color = 'rgba(255, 255, 255, 0.7)';
        document.getElementById('realBtn').style.borderColor = 'rgba(0, 217, 255, 0.3)';
    } else {
        document.getElementById('realBtn').style.background = 'linear-gradient(135deg, #00d9ff, #0099cc)';
        document.getElementById('realBtn').style.color = '#fff';
        document.getElementById('realBtn').style.borderColor = 'transparent';
        document.getElementById('demoBtn').style.background = 'transparent';
        document.getElementById('demoBtn').style.color = 'rgba(255, 255, 255, 0.7)';
        document.getElementById('demoBtn').style.borderColor = 'rgba(0, 217, 255, 0.3)';
    }
    
    updateDashboard();
}

// Select payment method
function selectPaymentMethod(method) {
    selectedPaymentMethod = method;
    
    document.querySelectorAll('.payment-method-card').forEach(function(card) {
        card.classList.remove('selected');
    });
    event.target.closest('.payment-method-card').classList.add('selected');
    
    const detailsLayer = document.getElementById('paymentDetailsLayer');
    detailsLayer.classList.add('active');
    
    const methodData = PAYMENT_METHODS[method];
    document.getElementById('paymentAddressText').textContent = methodData.address;
    const paymentID = 'CPT-' + (currentUserEmail ? currentUserEmail.split('@')[0].toUpperCase() : 'XXXXX') + '-' + Date.now().toString().slice(-6);
    document.getElementById('paymentID').textContent = 'Payment ID: ' + paymentID;
}

// Process deposit - FIXED VERSION
function processDeposit() {
    const amount = parseFloat(document.getElementById('depositAmount').value);
    const ref = document.getElementById('depositRef').value.trim();
    
    if (!amount || amount < CONFIG.MIN_DEPOSIT) {
        alert('‚ùå Minimum deposit: $' + CONFIG.MIN_DEPOSIT);
        return;
    }
    
    if (!selectedPaymentMethod) {
        alert('‚ùå Please select a payment method first!');
        return;
    }
    
    if (!ref) {
        alert('‚ùå Transaction reference is required!');
        return;
    }
    
    if (!confirm('‚ö†Ô∏è Have you COMPLETED the payment?\n\nClick OK only if you have already sent the payment!')) {
        alert('Please complete your payment first, then return and enter your transaction reference.');
        return;
    }
    
    const deposit = {
        id: Date.now().toString(),
        amount: amount,
        ref: ref,
        method: selectedPaymentMethod,
        timestamp: new Date().toISOString(),
        status: 'pending'
    };
    
    if (!currentUser.pendingDeposits) currentUser.pendingDeposits = [];
    currentUser.pendingDeposits.push(deposit);
    
    saveUser();
    closeModal('depositModal');
    
    selectedPaymentMethod = null;
    document.getElementById('paymentDetailsLayer').classList.remove('active');
    
    alert('‚úÖ DEPOSIT SUBMITTED!\n\nAmount: $' + amount.toFixed(2) + '\nMethod: ' + PAYMENT_METHODS[deposit.method].name + '\nReference: ' + ref + '\n\n‚è±Ô∏è Status: PENDING\n\nFunds will auto-appear within 1-5 minutes!');
    
    setTimeout(function() {
        verifyDeposit(deposit.id);
    }, CONFIG.PAYMENT_VERIFICATION_TIME);
}

// Verify deposit - FIXED VERSION
function verifyDeposit(depositId) {
    const deposit = currentUser.pendingDeposits.find(function(d) { return d.id === depositId; });
    if (!deposit || deposit.status !== 'pending') return;
    
    let bonusAmount = 0;
    if (!currentUser.receivedWelcomeBonus) {
        bonusAmount = deposit.amount * CONFIG.WELCOME_BONUS;
        currentUser.receivedWelcomeBonus = true;
    }
    
    const totalAmount = deposit.amount + bonusAmount;
    currentUser.displayBalance += totalAmount;
    currentUser.realBalance += totalAmount;
    currentUser.totalDeposited += deposit.amount;
    deposit.status = 'verified';
    
    saveUser();
    updateDashboard();
    
    if (sessionStorage.getItem('loggedIn')) {
        let msg = 'üéâ DEPOSIT VERIFIED!\n\nDeposit: $' + deposit.amount.toFixed(2);
        if (bonusAmount > 0) {
            msg += '\nüéÅ Bonus: +$' + bonusAmount.toFixed(2);
        }
        msg += '\nüí∞ Total: $' + totalAmount.toFixed(2) + '\n\n‚úÖ Funds now available!';
        alert(msg);
    }
}

// Modal functions
function showModal(id) {
    document.getElementById(id).classList.add('active');
    if (id === 'depositModal') {
        selectedPaymentMethod = null;
        document.getElementById('paymentDetailsLayer').classList.remove('active');
        document.querySelectorAll('.payment-method-card').forEach(function(card) {
            card.classList.remove('selected');
        });
    }
}

function closeModal(id) {
    document.getElementById(id).classList.remove('active');
}

// Alert function
function showAlert(id, message, type) {
    const alert = document.getElementById(id);
    alert.textContent = message;
    alert.style.display = 'block';
    alert.style.background = type === 'success' ? 'rgba(0, 255, 136, 0.1)' : 'rgba(255, 0, 110, 0.1)';
    alert.style.border = type === 'success' ? '1px solid rgba(0, 255, 136, 0.3)' : '1px solid rgba(255, 0, 110, 0.3)';
    alert.style.color = type === 'success' ? '#00ff88' : '#ff006e';
    
    if (type === 'error') {
        setTimeout(function() {
            alert.style.display = 'none';
        }, 5000);
    }
}

// Save user
function saveUser() {
    if (!currentUserEmail || !currentUser) return;
    const users = JSON.parse(localStorage.getItem('cryptoProUsers') || '{}');
    users[currentUserEmail] = currentUser;
    localStorage.setItem('cryptoProUsers', JSON.stringify(users));
}

// Initialize
window.addEventListener('DOMContentLoaded', function() {
    console.log('‚úÖ CryptoPro Platform Loaded');
    
    // Generate winners ticker first
    generateWinnersTicker();
    
    // Update active users
    updateActiveUsers();
    setInterval(updateActiveUsers, CONFIG.ACTIVE_USERS_UPDATE_INTERVAL);
    
    // Check for logged in user
    const loggedIn = sessionStorage.getItem('loggedIn');
    const email = sessionStorage.getItem('currentEmail');
    
    if (loggedIn && email) {
        const users = JSON.parse(localStorage.getItem('cryptoProUsers') || '{}');
        if (users[email]) {
            currentUser = users[email];
            currentUserEmail = email;
            showLayer('dashboardLayer');
        }
    }
});
</script>

</body>
</html>
